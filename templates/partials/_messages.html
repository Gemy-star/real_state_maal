{% if messages %}
<!-- Toast Container -->
<div class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 9999;">
  {% for message in messages %}
  <div class="toast align-items-center border-0 toast-msg"
       role="alert" aria-live="assertive" aria-atomic="true"
       data-bs-autohide="true" data-bs-delay="5000">
    <div class="d-flex">
      <div class="toast-body d-flex align-items-center gap-2">
        {% if message.tags == 'alert-success' %}
          <i class="fas fa-check-circle text-success"></i>
        {% elif message.tags == 'alert-danger' %}
          <i class="fas fa-times-circle text-danger"></i>
        {% elif message.tags == 'alert-warning' %}
          <i class="fas fa-exclamation-triangle text-warning"></i>
        {% elif message.tags == 'alert-info' %}
          <i class="fas fa-info-circle text-info"></i>
        {% else %}
          <i class="fas fa-bell text-secondary"></i>
        {% endif %}
        <span>{{ message }}</span>
      </div>
      <button type="button" class="btn-close btn-close-dark me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
    {% if message.tags == 'alert-success' %}
      <div class="toast-progress toast-progress-success"></div>
    {% elif message.tags == 'alert-danger' %}
      <div class="toast-progress toast-progress-danger"></div>
    {% elif message.tags == 'alert-warning' %}
      <div class="toast-progress toast-progress-warning"></div>
    {% else %}
      <div class="toast-progress toast-progress-info"></div>
    {% endif %}
  </div>
  {% endfor %}
</div>

<style>
.toast-msg {
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 8px 30px rgba(0,0,0,0.12);
  margin-bottom: 0.5rem;
  overflow: hidden;
  min-width: 300px;
  animation: toastSlideIn 0.4s ease-out;
}

@keyframes toastSlideIn {
  from { transform: translateX(100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

.toast-msg .toast-body {
  padding: 1rem 1.25rem;
  font-size: 0.92rem;
  font-weight: 500;
}

.toast-msg .toast-body i {
  font-size: 1.2rem;
  flex-shrink: 0;
}

.toast-progress {
  height: 3px;
  animation: toastShrink 5s linear forwards;
}

.toast-progress-success { background: #28a745; }
.toast-progress-danger { background: #dc3545; }
.toast-progress-warning { background: #ffc107; }
.toast-progress-info { background: #17a2b8; }

@keyframes toastShrink {
  from { width: 100%; }
  to { width: 0%; }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('.toast-msg').forEach(function(el) {
    new bootstrap.Toast(el).show();
  });
});
</script>
{% endif %}
